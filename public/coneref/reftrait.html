<html>
  <head>
	  <title>Traits - Cone Reference</title>
		<meta content="text/html; charset=UTF-8" http-equiv="content-type">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
	  <link rel="stylesheet" type="text/css" href="standard.css" />
	</head>
  <body>
		<div id="header">
			<a href="/"><div id="title">Cone</div></a>
			<div id="sub">Traits</div>
		</div>

    <div class="text">

	<p>Like <span class="pre">struct</span><span class="pre">, trait</span>
		defines a new type composed of named fields and methods.
		For example:</p>
<pre>
trait Node
  id u32
  fn print()
</pre>
	<p>Traits differ from structs in two important ways:</p>
	<ul>
		<li>It is not possible to directly create a value or variable of this type
			(e.g., <span class="pre">imm node = Node[12]</span> is illegal).</li>
		<li>A trait may define methods that have no implementation logic,
			as the <span class="pre">print</span> method demonstrates.</li>
	</ul>
	<p>Traits are versatile, supporting many roles:</p>
	<ul>
		<li><a href="#inherit"><b>Inheritance</b></a>, to create concrete types
			(including variant types) that share common fields and methods.</li>
		<li><a href="#marker"><b>Type markers</b></a>, to distinguish between types that support
			a certain behavior and those that forbid it.</li>
		<li><a href="refvirtref.html"><b>Virtual references</b></a>,
			to access fields or use methods of values whose concrete
			types we won't know until run-time.</li>
		<li><a href="refconstraint.html"><b>Generic constraints</b></a>, to declare which types
			generic type or function can safely support, when instantiated.</li>
	</ul>

	<h2 id="inherit">Trait-base Inheritance</h2>
	<p>A trait type may be used to build another trait or struct type.</p>
<pre>
struct NbrNode
  _ Node    // Inherit from the Node trait
  nbr f32

  fn print() { ... }
</pre>
	<p>No name is given for the composed trait, since we cannot work with it as an aggregate value anyway.
		The trait's fields are incorporated into the struct at the indicated place.
		No <span class="pre">use *</span> is required to indicate inheritance, 
		because traits are always completely inherited.</p>
	<p>As for methods: 
		The struct must implement every trait method that has no implementation.
		The struct may provide its own implementation for any method that the trait has implemented.
		If it does not, the trait's method implementation is inherited.</p>

	<h2 id="marker">Marker traits</h2>
	<p>A marker trait defines no fields nor methods.
		Its value comes from other trait or struct types inheriting it.
		Its use then becomes a testable attribute of that type (e.g., by generics), 
		allowing one to distinguish between types that support
		a certain behavior and those that don't.</p>


	<p style="text-align: right; margin-top: 2em;">
		<a href="refrefs.html"><img alt="_" src="next.png" /></a>
	</p>

	</div>
	</body>
</html>