<html>
  <head>
	  <title>Expressions - Cone Reference</title>
		<meta content="text/html; charset=UTF-8" http-equiv="content-type">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
	  <link rel="stylesheet" type="text/css" href="standard.css" />
	</head>
  <body>
		<div id="header">
			<a href="/"><div id="title">Cone</div></a>
			<div id="sub">Expressions</div>
		</div>

    <div class="text">

	<p>Expressions use operators, methods and functions calls to calculate new values using existing values.
	Although the arithmetic and logical expressions demonstrated below primarily use numbers for examples,
	similar looking expressions may be formulated that use values of other types.</p>
	
	<h2>Arithmetic expressions</h2>
	<h3 id="arithops">Arithmetic Operators</h3>
	<p>Integer and floating point numbers may be calculated using arithmetic operators:</p>
	<dl>
	<dt>'+'</dt>
	<dd>Add</dd>
	<dt>'-'</dt>
	<dd>Subtract (or negate when used as a prefix operator)</dd>
	<dt>'*'</dt>
	<dd>Multiply</dd>
	<dt>'/'</dt>
	<dd>Divide</dd>
	<dt>'%'</dt>
	<dd>Modulo (remainder)</dd>
	</dl>
	<p>Thus:</p>
<pre>
-12 + 14    // 2
6 / 5       // 1
-4 % 3      // -1 (where -4/3 --> -1, truncating towards zero)
2*2 + 2*3   // 10 (standard algebraic operator precedence)
2 * (4 + 1) // 10 (parentheses override operator precedence)
</pre>

	<h3>Arithmetic Assignment</h3>
	<p>The arithmetic assignment operators (e.g., '+=', '-=', '*=', '/=') offer a convenient way to modify a variable's current value:</p>
<pre>
counter = 3
counter += 1  // 4. Equivalent to: counter = counter + 1
</pre>

	<h3>Numeric methods</h3>
	<p>Additional numeric calculations can be performed using built-in methods.
	The name of the desired method follows the value, separated by a period ('.'):
<pre>
(-1).abs    // 1 (the absolute value, making a number positive)
(pi/2).sin  // 1.0 (trigonometric sine function)
</pre>
	<p>Sometimes, the method needs additional values.
	These are specified within parentheses following the method's name.</p>
<pre>
4.max(5)    // 5 (returns the larger of the two numbers)
</pre>
	<p>Methods are covered more thoroughly in a later chapter.
	For now, several characteristics are worth mentioning:</p>
	<ul>
	<li>The logic used for a method depends on the type of the value it is applied to (the value it follows).
	Thus, the method named 'max' applied to an integer is actually a different method than
	a method with the same name applied to a floating point number.
	Every type establishes the names of the methods it supports.
	An error results when trying to use a method not implemented by the value's type.</li>
	<li>The arithmetic operators introduced earlier (e.g., <span class="pre">+</span> for add)
	are implemented using number type methods:
<pre>
// The method name equivalent for the + operator is `+`
// The method name is enclosed in backticks since it includes punctuation
3+4   // is actually: 3.`+`(4)
</pre>
	<p>Since the arithmetic operators are simply methods, they are also accessible to non-numeric types:</p>
<pre>
"a"+"b"  // "ab" (concatenation results when two strings are added)
</pre>
	<li>The method name for the negative operator is <span class="pre">neg</span>. 
	This distinguishes it from <span class="pre">`-`</span>, the subtraction method.</li>
	</ul>

	<h3 id="numrconv">Numeric conversions</h3>
	<p>Numbers are automatically converted whenever copied from one number type to another.</p>
<pre>
imm six i32 = 6u8    // Converts 8-bit unsigned integer to 32-bit signed integer
imm sixf f64 = six   // Converts 32-bit signed integer to 64-bit floating point number
</pre>
	<p>If the receiving number type is smaller, numeric information may be lost.</p>
	<p>The type of a number that results from an arithmetic operation is that of the left-hand number.
	If necessary, the right hand number is converted prior to the operation.</p>
<pre>
imm r = 5.0 + 2  // 7.0f32
</pre>
	<p>Numeric conversions may also be specified explicitly using the
	<span class="pre">as</span> operator followed by the type to convert the value to:</p>
<pre>
imm six = 6u8 as i32;
</pre>

	<h2>Logical expressions</h2>
	<p>The logical operators operate on true/false values:</p>
	<dl>
	<dt>'|'</dt>
	<dd>Or</dd>
	<dt>'&'</dt>
	<dd>And</dd>
	<dt>'^'</dt>
	<dd>Xor</dd>
	<dt>'~'</dt>
	<dd>Not</dd>
	</dl>
	<p>For example:</p>
<pre>
true | (false & true) // true
true ^ ~true          // true
</pre>
	<p>These bitwise operators may also be used on unsigned integers,
	as they are viewed as a collection of true/false bits.</p>
<pre>
0xE0u | 0xB8u  // 0xF8u
</pre>
	<h3>Shift methods</h3>
	<p>The shifting of an unsigned integer's bit is accomplished
	using the shl and shr methods:</p>
<pre>
0x0Cu.shl(1)    // 0x18, after shifting bits left once
</pre>
	<h3>Logical assignment operators</h3>
	<p>These work in a similar manner to the arithmetic assignment operators:</p>
<pre>
mut flags = 0xC0u
flags |= 0x01u   // 0xC1u
</pre>

	<h2>Other Expression Operators</h2>
	<p>There are many more expression operators whose description may be found in the chapters
	relevant to their common use:</p>
	<ul>
	<li>Match and conditional operators</li>
	<li>Collection (this block) operators</li>
	<li>Range constructor (`..`)</li>
	<li>New prefix operator (`+`)</li>
	</ul>
	
		
	<p style="text-align: right; margin-top: 2em;">
		<a href="reffunc.html"><img alt="_" src="next.png" /></a>
	</p>
		
	</div>
	</body>
</html>