<html>
  <head>
	  <title>Expressions - Cone Reference</title>
		<meta content="text/html; charset=UTF-8" http-equiv="content-type">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
	  <link rel="stylesheet" type="text/css" href="standard.css" />
	</head>
  <body>
		<div id="header">
			<a href="/"><div id="title">Cone</div></a>
			<div id="sub">Expressions</div>
		</div>

    <div class="text">

	<p>Expressions use operators, methods and functions calls to calculate new values using existing values.
	Although the expression examples on this page use numbers,
	similar expressions may be formulated that manipulate values of other types.</p>
	
	<h2>Arithmetic expressions</h2>
	<h3 id="arithops">Arithmetic Operators</h3>
	<p>Integer and floating point numbers may be calculated using arithmetic operators:</p>
	<dl>
	<dt>'+'</dt>
	<dd>Add</dd>
	<dt>'-'</dt>
	<dd>Subtract (or negate when used as a prefix operator)</dd>
	<dt>'*'</dt>
	<dd>Multiply</dd>
	<dt>'/'</dt>
	<dd>Divide</dd>
	<dt>'%'</dt>
	<dd>Modulo (remainder)</dd>
	</dl>
	<p>Thus:</p>
<pre>
-12 + 14    // 2
6 / 5       // 1
-4 % 3      // -1 (where -4/3 --> -1, truncating towards zero)
2*2 + 2*3   // 10 (standard algebraic operator precedence)
2 * (4 + 1) // 10 (parentheses override operator precedence)
</pre>

	<h3>Arithmetic Assignment</h3>
	<p>The arithmetic assignment operators (e.g., '+=', '-=', '*=', '/=') offer a convenient way to update
		an existing stored value:</p>
<pre>
counter = 3
counter += 1  // 4. Equivalent to: counter = counter + 1
</pre>

	<h3 id="method">Numeric methods</h3>
	<p>Additional numeric calculations can be performed using built-in methods.
	The name of the desired method follows the value, separated by the dot operator ('.'):
<pre>
(-1).abs    // 1 (the absolute value, making a number positive)
(pi/2).sin  // 1.0 (trigonometric sine function)
</pre>
	<p>Sometimes, a method may require additional values.
	These argument values are specified within parentheses following the method's name.</p>
<pre>
4.max(5)    // 5 (returns the larger of the two numbers)
</pre>
	<p>Method use is very common and convenient. It is helpful to know that:
	<ul>
	<li>The logic a method performs depends on the type of the value it is applied to.
	Thus, a method named 'max' applied to an integer is actually a different method than
	when 'max' is applied to a floating point number.
	Every type defines the names and logic for all methods it supports.
	An error results when trying to use a method not implemented by the value's type.</li>
	<li>The arithmetic operators introduced earlier (e.g., <span class="pre">+</span> for add)
	are implemented under the covers using number type methods:
<pre>
// The method name equivalent for the + operator is `+`
// The method name is enclosed in backticks since it includes punctuation
3+4   // is actually: 3.`+`(4)
</pre>
	<p>Since the arithmetic operators are simply methods, they may also be used on non-numeric values:</p>
<pre>
"a"+"b"  // "ab" (concatenation results when two strings are added)
</pre>
	</ul>
	<p>Methods are covered more thoroughly in <a href="refmethod.html">a later chapter</a>.</p>

	<h3>Function calls</h3>
	<p>Function calls are very much like method calls, except they are not applied to a value in the same way.
	  Instead of specifying a value, dot operator, and a method name, one simply specifies the function name
	  followed by any comma-separated arguments in parentheses.
	</p>
<pre>
pow(10f, 2f)
</pre>

	<h3 id="numrconv">Numeric conversions</h3>
	<p>Numbers are automatically converted whenever copied from one number type to another.</p>
<pre>
imm six i32 = 6u8    // Converts 8-bit unsigned integer to 32-bit signed integer
imm sixf f64 = six   // Converts 32-bit signed integer to 64-bit floating point number
</pre>
	<p>If the receiving number type is smaller, numeric information may be lost.</p>
	<p>The type of a number that results from an arithmetic operation is that of the left-hand number.
	If necessary, the right hand number is converted prior to the operation.</p>
<pre>
imm r = 5.0 + 2  // 7.0f32
</pre>

	<h2>Logical expressions</h2>
	<p>The logical operators operate on true/false values:</p>
	<dl>
	<dt>'|'</dt>
	<dd>Or</dd>
	<dt>'&'</dt>
	<dd>And</dd>
	<dt>'^'</dt>
	<dd>Xor</dd>
	<dt>'~'</dt>
	<dd>Not</dd>
	</dl>
	<p>For example:</p>
<pre>
true | (false & true) // true
true ^ ~true          // true
</pre>
	<p>These bitwise operators may also be used on unsigned integers,
	as they are viewed as a collection of true/false bits.</p>
<pre>
0xE0u | 0xB8u  // 0xF8u
</pre>
	<h3>Shift methods</h3>
	<p>The shifting of an unsigned integer's bit is accomplished
	using the shl and shr methods:</p>
<pre>
0x0Cu.shl(1)    // 0x18, after shifting bits left once
</pre>
	<h3>Logical assignment operators</h3>
	<p>These work in a similar manner to the arithmetic assignment operators:</p>
<pre>
mut flags = 0xC0u
flags |= 0x01u   // 0xC1u
</pre>

	<h2>Other Expression Operators</h2>
	<p>Cone supports several more expression operators.
		Descriptions may be found in the chapters
		relevant to their common use:</p>
	<ul>
	<li><a href="refcondexp.html">Match and conditional operators</a></li>
	<li>Collection (this block) operators</li>
	<li>Range constructor (`..`)</li>
	<li>New prefix operator (`+`)</li>
	</ul>
	
		
	<p style="text-align: right; margin-top: 2em;">
		<a href="reffunc.html"><img alt="_" src="next.png" /></a>
	</p>
		
	</div>
	</body>
</html>