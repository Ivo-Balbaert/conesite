<html>
  <head>
	  <title>Function References - Cone Reference</title>
		<meta content="text/html; charset=UTF-8" http-equiv="content-type">
		<meta name="viewport" content="width=device-width, initial-scale=1" />
	  <link rel="stylesheet" type="text/css" href="standard.css" />
	</head>
  <body>
		<div id="header">
			<a href="/"><div id="title">Cone</div></a>
			<div id="sub">Function References</div>
		</div>

    <div class="text">

	<p></p>

	<p>opaq permission</p>
	<p>We can get a reference to any function the same way as for a variable by using the ampersand operator:
	</p>
<pre>
fn incr(nbr u32) u32
  nbr + 1

fn doit()
  imm fnref = &incr  // fn ref points to the function "incr"
</pre>
	<p>A function reference may be copied/passed around like other values.
		Although it is a borrowed reference, it has no lifetime constraints, since it points to a global entity.
		Its permission is <span class="pre">id</span>, since you may not read or change the function it points to.
	</p>
	<p>The one thing you can do with a function reference (besides copy it or compare it to another reference)
		is use it to call the function it refers to.</p>
<pre>
fn doit()
	dostuff(&incr)   // Pass along a reference to the incr function

// Note the parameter needs to declare the reference's function signature
fn dostuff(fnref &fn(u32) u32)
  fnref(4)         // Call the function
</pre>
	<p>Function references are useful when you want the flexibility of embedding some 
		logic that conforms to a certain API within another piece of logic.
		Thus, it is possible for some other function to call dostuff passing along a reference
		to a different function (e.g., "double").
	</p>

	<h2>Anonymous Functions</h2>
	<p>When the function you want to get a reference to is small,
		it may be more convenient to incorporate the logic for the function right where the function reference is to be captured.
		This can be accomplished using an anonymous function:
	</p>
<pre>
fn doit()
	dostuff(&fn(nbr u32) u32 {nbr+1})
	dostuff(&fn(nbr u32) u32 {nbr+nbr})
</pre>


	<p style="text-align: right; margin-top: 2em;">
		<a href="reflifetime.html"><img alt="_" src="next.png" /></a>
	</p>

	</div>
	</body>
</html>